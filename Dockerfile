# Pull base image
#FROM resin/rpi-raspbian:wheezy
FROM balenalib/raspberry-pi-debian:latest

# Install dependencies & pull p1reader script
RUN echo && \
    printf "\n\n--------------------------------------------------------------------------------------------------------\n" && \
    apt-get update && \
    printf "\n\n--------------------------------------------------------------------------------------------------------\n" && \
    apt-get install apt-utils && \
    printf "\n\n--------------------------------------------------------------------------------------------------------\n" && \
    apt-get upgrade && \
    printf "\n\n--------------------------------------------------------------------------------------------------------\n" && \
    apt-get install debconf && \
    printf "\n\n--------------------------------------------------------------------------------------------------------\n" && \
    apt-get install python3 && \
    printf "\n\n--------------------------------------------------------------------------------------------------------\n" && \
    apt-get install python3-pip && \
    printf "\n\n--------------------------------------------------------------------------------------------------------\n" && \
    pip3 install setuptools && \
    printf "\n\n--------------------------------------------------------------------------------------------------------\n" && \
    pip3 install wheel && \
    printf "\n\n--------------------------------------------------------------------------------------------------------\n" && \
    python3 --version && \
    printf "\n\n--------------------------------------------------------------------------------------------------------\n" && \
    apt autoremove && \
    printf "\n\n--------------------------------------------------------------------------------------------------------\n" && \
    apt-get clean  && \
    printf "\n\n--------------------------------------------------------------------------------------------------------\n" && \
    rm -rf /var/lib/apt/lists/*

RUN curl -sL https://github.com/openfaas/faas/releases/download/0.9.14/fwatchdog > /usr/bin/fwatchdog && \
    chmod +x /usr/bin/fwatchdog


# Define your binary here
ENV fprocess="/bin/cat"

CMD ["fwatchdog"]
